!function(t){"use strict";var s=function(s,e){this.el=t(s),this.options=t.extend({},t.fn.typed.defaults,e),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=!this.isInput&&this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.cursorClass=this.options.cursorClass,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};s.prototype={constructor:s,init:function(){var t=this;t.timeout=setTimeout(function(){for(var s=0;s<t.strings.length;++s)t.sequence[s]=s;t.shuffle&&(t.sequence=t.shuffleArray(t.sequence)),t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos)},t.startDelay)},build:function(){var s=this;if(this.showCursor===!0&&(this.cursor=t('<span class="'+this.cursorClass+'">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){this.strings=[],this.stringsElement.hide();var e=this.stringsElement.children();t.each(e,function(e,r){s.strings.push(t(r).html())})}this.init()},typewrite:function(t,s){if(this.stop===!0)return void console.log("currently stopped. salla");var e=Math.round(70*Math.random())+this.typeSpeed,r=this;r.timeout=setTimeout(function(){var e=0,i=t.substr(s);if("^"===i.charAt(0)){var o=1;/^\^\d+/.test(i)&&(i=/\d+/.exec(i)[0],o+=i.length,e=parseInt(i)),t=t.substring(0,s)+t.substring(s+o)}if("html"===r.contentType){var n=t.substr(s).charAt(0);if("<"===n||"&"===n){var a="",h="";for(h="<"===n?">":";";t.substr(s+1).charAt(0)!==h&&(a+=t.substr(s).charAt(0),s++,!(s+1>t.length)););s++,a+=h}}r.timeout=setTimeout(function(){if(s===t.length){if(r.options.onStringTyped(r.arrayPos),r.arrayPos===r.strings.length-1&&(r.options.callback(),r.curLoop++,r.loop===!1||r.curLoop===r.loopCount))return;r.timeout=setTimeout(function(){r.backspace(t,s)},r.backDelay)}else{0===s&&r.options.preStringTyped(r.arrayPos);var e=t.substr(0,s+1);r.attr?r.el.attr(r.attr,e):r.isInput?r.el.val(e):"html"===r.contentType?r.el.html(e):r.el.text(e),s++,r.typewrite(t,s)}},e)},e)},backspace:function(t,s){if(this.stop!==!0){var e=Math.round(70*Math.random())+this.backSpeed,r=this;r.timeout=setTimeout(function(){if("html"===r.contentType&&">"===t.substr(s).charAt(0)){for(var e="";"<"!==t.substr(s-1).charAt(0)&&(e-=t.substr(s).charAt(0),s--,!(s<0)););s--,e+="<"}var i=t.substr(0,s);r.attr?r.el.attr(r.attr,i):r.isInput?r.el.val(i):"html"===r.contentType?r.el.html(i):r.el.text(i),s>r.stopNum?(s--,r.backspace(t,s)):s<=r.stopNum&&(r.arrayPos++,r.arrayPos===r.strings.length?(r.arrayPos=0,r.shuffle&&(r.sequence=r.shuffleArray(r.sequence)),r.init()):r.typewrite(r.strings[r.sequence[r.arrayPos]],s))},e)}},shuffleArray:function(t){var s,e,r=t.length;if(r)for(;--r;)e=Math.floor(Math.random()*(r+1)),s=t[e],t[e]=t[r],t[r]=s;return t},reset:function(){var t=this;clearInterval(t.timeout);this.el.attr("id");this.el.empty(),"undefined"!=typeof this.cursor&&this.cursor.remove(),this.strPos=0,this.arrayPos=0,this.curLoop=0,this.options.resetCallback()}},t.fn.typed=function(e){return this.each(function(){var r=t(this),i=r.data("typed"),o="object"==typeof e&&e;i&&i.reset(),r.data("typed",i=new s(this,o)),"string"==typeof e&&i[e]()})},t.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",cursorClass:"typed-cursor",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVkLmpzIl0sIm5hbWVzIjpbIiQiLCJUeXBlZCIsImVsIiwib3B0aW9ucyIsInRoaXMiLCJleHRlbmQiLCJmbiIsInR5cGVkIiwiZGVmYXVsdHMiLCJpc0lucHV0IiwiaXMiLCJhdHRyIiwic2hvd0N1cnNvciIsImVsQ29udGVudCIsInRleHQiLCJjb250ZW50VHlwZSIsInR5cGVTcGVlZCIsInN0YXJ0RGVsYXkiLCJiYWNrU3BlZWQiLCJiYWNrRGVsYXkiLCJzdHJpbmdzRWxlbWVudCIsInN0cmluZ3MiLCJzdHJQb3MiLCJhcnJheVBvcyIsInN0b3BOdW0iLCJsb29wIiwibG9vcENvdW50IiwiY3VyTG9vcCIsInN0b3AiLCJjdXJzb3JDaGFyIiwiY3Vyc29yQ2xhc3MiLCJzaHVmZmxlIiwic2VxdWVuY2UiLCJidWlsZCIsInByb3RvdHlwZSIsImNvbnN0cnVjdG9yIiwiaW5pdCIsInNlbGYiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImkiLCJsZW5ndGgiLCJzaHVmZmxlQXJyYXkiLCJ0eXBld3JpdGUiLCJjdXJzb3IiLCJhZnRlciIsImhpZGUiLCJjaGlsZHJlbiIsImVhY2giLCJrZXkiLCJ2YWx1ZSIsInB1c2giLCJodG1sIiwiY3VyU3RyaW5nIiwiY3VyU3RyUG9zIiwiY29uc29sZSIsImxvZyIsImh1bWFuaXplIiwiTWF0aCIsInJvdW5kIiwicmFuZG9tIiwiY2hhclBhdXNlIiwic3Vic3RyIiwiY2hhckF0Iiwic2tpcCIsInRlc3QiLCJleGVjIiwicGFyc2VJbnQiLCJzdWJzdHJpbmciLCJjdXJDaGFyIiwidGFnIiwiZW5kVGFnIiwib25TdHJpbmdUeXBlZCIsImNhbGxiYWNrIiwiYmFja3NwYWNlIiwicHJlU3RyaW5nVHlwZWQiLCJuZXh0U3RyaW5nIiwidmFsIiwiYXJyYXkiLCJ0bXAiLCJjdXJyZW50IiwidG9wIiwiZmxvb3IiLCJyZXNldCIsImNsZWFySW50ZXJ2YWwiLCJlbXB0eSIsInJlbW92ZSIsInJlc2V0Q2FsbGJhY2siLCJvcHRpb24iLCIkdGhpcyIsImRhdGEiLCJ3aW5kb3ciLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQXlCRSxTQUFTQSxHQUVWLFlBRUEsSUFBSUMsR0FBUSxTQUFTQyxFQUFJQyxHQUd4QkMsS0FBS0YsR0FBS0YsRUFBRUUsR0FHWkUsS0FBS0QsUUFBVUgsRUFBRUssVUFBV0wsRUFBRU0sR0FBR0MsTUFBTUMsU0FBVUwsR0FHakRDLEtBQUtLLFFBQVVMLEtBQUtGLEdBQUdRLEdBQUcsU0FDMUJOLEtBQUtPLEtBQU9QLEtBQUtELFFBQVFRLEtBR3pCUCxLQUFLUSxZQUFhUixLQUFLSyxTQUFrQkwsS0FBS0QsUUFBUVMsV0FHdERSLEtBQUtTLFVBQVlULEtBQUtPLEtBQU9QLEtBQUtGLEdBQUdTLEtBQUtQLEtBQUtPLE1BQVFQLEtBQUtGLEdBQUdZLE9BRy9EVixLQUFLVyxZQUFjWCxLQUFLRCxRQUFRWSxZQUdoQ1gsS0FBS1ksVUFBWVosS0FBS0QsUUFBUWEsVUFHOUJaLEtBQUthLFdBQWFiLEtBQUtELFFBQVFjLFdBRy9CYixLQUFLYyxVQUFZZCxLQUFLRCxRQUFRZSxVQUc5QmQsS0FBS2UsVUFBWWYsS0FBS0QsUUFBUWdCLFVBRzlCZixLQUFLZ0IsZUFBaUJoQixLQUFLRCxRQUFRaUIsZUFHbkNoQixLQUFLaUIsUUFBVWpCLEtBQUtELFFBQVFrQixRQUc1QmpCLEtBQUtrQixPQUFTLEVBR2RsQixLQUFLbUIsU0FBVyxFQUtoQm5CLEtBQUtvQixRQUFVLEVBR2ZwQixLQUFLcUIsS0FBT3JCLEtBQUtELFFBQVFzQixLQUN6QnJCLEtBQUtzQixVQUFZdEIsS0FBS0QsUUFBUXVCLFVBQzlCdEIsS0FBS3VCLFFBQVUsRUFHZnZCLEtBQUt3QixNQUFPLEVBR1p4QixLQUFLeUIsV0FBYXpCLEtBQUtELFFBQVEwQixXQUkvQnpCLEtBQUswQixZQUFjMUIsS0FBS0QsUUFBUTJCLFlBR2hDMUIsS0FBSzJCLFFBQVUzQixLQUFLRCxRQUFRNEIsUUFFNUIzQixLQUFLNEIsWUFHTDVCLEtBQUs2QixRQUdOaEMsR0FBTWlDLFdBRUxDLFlBQWFsQyxFQUVibUMsS0FBTSxXQUdMLEdBQUlDLEdBQU9qQyxJQUNYaUMsR0FBS0MsUUFBVUMsV0FBVyxXQUN6QixJQUFLLEdBQUlDLEdBQUUsRUFBRUEsRUFBRUgsRUFBS2hCLFFBQVFvQixTQUFTRCxFQUFHSCxFQUFLTCxTQUFTUSxHQUFHQSxDQUd0REgsR0FBS04sVUFBU00sRUFBS0wsU0FBV0ssRUFBS0ssYUFBYUwsRUFBS0wsV0FHeERLLEVBQUtNLFVBQVVOLEVBQUtoQixRQUFRZ0IsRUFBS0wsU0FBU0ssRUFBS2QsV0FBWWMsRUFBS2YsU0FDOURlLEVBQUtwQixhQUdUZ0IsTUFBTyxXQUNOLEdBQUlJLEdBQU9qQyxJQU1YLElBSklBLEtBQUtRLGNBQWUsSUFDdkJSLEtBQUt3QyxPQUFTNUMsRUFBRSxnQkFBbUJJLEtBQUswQixZQUFjLEtBQVExQixLQUFLeUIsV0FBYSxXQUNoRnpCLEtBQUtGLEdBQUcyQyxNQUFNekMsS0FBS3dDLFNBRWhCeEMsS0FBS2dCLGVBQWdCLENBQ3hCaEIsS0FBS2lCLFdBQ0xqQixLQUFLZ0IsZUFBZTBCLE1BRXBCLElBQUl6QixHQUFVakIsS0FBS2dCLGVBQWUyQixVQUNsQy9DLEdBQUVnRCxLQUFLM0IsRUFBUyxTQUFTNEIsRUFBS0MsR0FDN0JiLEVBQUtoQixRQUFROEIsS0FBS25ELEVBQUVrRCxHQUFPRSxVQUc3QmhELEtBQUtnQyxRQUlOTyxVQUFXLFNBQVNVLEVBQVdDLEdBRTlCLEdBQUlsRCxLQUFLd0IsUUFBUyxFQUVqQixXQURBMkIsU0FBUUMsSUFBSSwyQkFNYixJQUFJQyxHQUFXQyxLQUFLQyxNQUFzQixHQUFoQkQsS0FBS0UsVUFBeUJ4RCxLQUFLWSxVQUN6RHFCLEVBQU9qQyxJQVdYaUMsR0FBS0MsUUFBVUMsV0FBVyxXQUl6QixHQUFJc0IsR0FBWSxFQUNaQyxFQUFTVCxFQUFVUyxPQUFPUixFQUM5QixJQUF5QixNQUFyQlEsRUFBT0MsT0FBTyxHQUFZLENBQzdCLEdBQUlDLEdBQU8sQ0FDUCxVQUFTQyxLQUFLSCxLQUNqQkEsRUFBUyxNQUFNSSxLQUFLSixHQUFRLEdBQzVCRSxHQUFRRixFQUFPckIsT0FDZm9CLEVBQVlNLFNBQVNMLElBSXRCVCxFQUFZQSxFQUFVZSxVQUFVLEVBQUdkLEdBQWFELEVBQVVlLFVBQVVkLEVBQVlVLEdBR2pGLEdBQXlCLFNBQXJCM0IsRUFBS3RCLFlBQXdCLENBRWhDLEdBQUlzRCxHQUFVaEIsRUFBVVMsT0FBT1IsR0FBV1MsT0FBTyxFQUNqRCxJQUFnQixNQUFaTSxHQUErQixNQUFaQSxFQUFpQixDQUN2QyxHQUFJQyxHQUFNLEdBQ05DLEVBQVMsRUFPYixLQUxDQSxFQURlLE1BQVpGLEVBQ00sSUFHQSxJQUVIaEIsRUFBVVMsT0FBT1IsRUFBWSxHQUFHUyxPQUFPLEtBQU9RLElBQ3BERCxHQUFPakIsRUFBVVMsT0FBT1IsR0FBV1MsT0FBTyxHQUMxQ1QsTUFDSUEsRUFBWSxFQUFJRCxFQUFVWixXQUUvQmEsSUFDQWdCLEdBQU9DLEdBS1RsQyxFQUFLQyxRQUFVQyxXQUFXLFdBQ3pCLEdBQUllLElBQWNELEVBQVVaLE9BQVEsQ0FLbkMsR0FIQUosRUFBS2xDLFFBQVFxRSxjQUFjbkMsRUFBS2QsVUFHNUJjLEVBQUtkLFdBQWFjLEVBQUtoQixRQUFRb0IsT0FBUyxJQUUzQ0osRUFBS2xDLFFBQVFzRSxXQUVicEMsRUFBS1YsVUFHRFUsRUFBS1osUUFBUyxHQUFTWSxFQUFLVixVQUFZVSxFQUFLWCxXQUNoRCxNQUdGVyxHQUFLQyxRQUFVQyxXQUFXLFdBQ3pCRixFQUFLcUMsVUFBVXJCLEVBQVdDLElBQ3hCakIsRUFBS2xCLGVBRUYsQ0FHWSxJQUFkbUMsR0FDSGpCLEVBQUtsQyxRQUFRd0UsZUFBZXRDLEVBQUtkLFNBS2xDLElBQUlxRCxHQUFhdkIsRUFBVVMsT0FBTyxFQUFHUixFQUFZLEVBQzdDakIsR0FBSzFCLEtBQ1IwQixFQUFLbkMsR0FBR1MsS0FBSzBCLEVBQUsxQixLQUFNaUUsR0FFcEJ2QyxFQUFLNUIsUUFDUjRCLEVBQUtuQyxHQUFHMkUsSUFBSUQsR0FDbUIsU0FBckJ2QyxFQUFLdEIsWUFDZnNCLEVBQUtuQyxHQUFHa0QsS0FBS3dCLEdBRWJ2QyxFQUFLbkMsR0FBR1ksS0FBSzhELEdBS2Z0QixJQUVBakIsRUFBS00sVUFBVVUsRUFBV0MsS0FHekJPLElBR0RKLElBSUppQixVQUFXLFNBQVNyQixFQUFXQyxHQUU5QixHQUFJbEQsS0FBS3dCLFFBQVMsRUFBbEIsQ0FNQSxHQUFJNkIsR0FBV0MsS0FBS0MsTUFBc0IsR0FBaEJELEtBQUtFLFVBQXlCeEQsS0FBS2MsVUFDekRtQixFQUFPakMsSUFFWGlDLEdBQUtDLFFBQVVDLFdBQVcsV0FlekIsR0FBeUIsU0FBckJGLEVBQUt0QixhQUVzQyxNQUExQ3NDLEVBQVVTLE9BQU9SLEdBQVdTLE9BQU8sR0FBWSxDQUVsRCxJQURBLEdBQUlPLEdBQU0sR0FDMkMsTUFBOUNqQixFQUFVUyxPQUFPUixFQUFZLEdBQUdTLE9BQU8sS0FDN0NPLEdBQU9qQixFQUFVUyxPQUFPUixHQUFXUyxPQUFPLEdBQzFDVCxNQUNJQSxFQUFZLE1BRWpCQSxJQUNBZ0IsR0FBTyxJQU1ULEdBQUlNLEdBQWF2QixFQUFVUyxPQUFPLEVBQUdSLEVBQ2pDakIsR0FBSzFCLEtBQ1IwQixFQUFLbkMsR0FBR1MsS0FBSzBCLEVBQUsxQixLQUFNaUUsR0FFcEJ2QyxFQUFLNUIsUUFDUjRCLEVBQUtuQyxHQUFHMkUsSUFBSUQsR0FDbUIsU0FBckJ2QyxFQUFLdEIsWUFDZnNCLEVBQUtuQyxHQUFHa0QsS0FBS3dCLEdBRWJ2QyxFQUFLbkMsR0FBR1ksS0FBSzhELEdBTVh0QixFQUFZakIsRUFBS2IsU0FFcEI4QixJQUVBakIsRUFBS3FDLFVBQVVyQixFQUFXQyxJQUlsQkEsR0FBYWpCLEVBQUtiLFVBQzFCYSxFQUFLZCxXQUVEYyxFQUFLZCxXQUFhYyxFQUFLaEIsUUFBUW9CLFFBQ2xDSixFQUFLZCxTQUFXLEVBR2JjLEVBQUtOLFVBQVNNLEVBQUtMLFNBQVdLLEVBQUtLLGFBQWFMLEVBQUtMLFdBRXhESyxFQUFLRCxRQUVMQyxFQUFLTSxVQUFVTixFQUFLaEIsUUFBUWdCLEVBQUtMLFNBQVNLLEVBQUtkLFdBQVkrQixLQUkzREcsS0FRSmYsYUFBYyxTQUFTb0MsR0FDdEIsR0FBSUMsR0FBS0MsRUFBU0MsRUFBTUgsRUFBTXJDLE1BQzlCLElBQUd3QyxFQUFLLE9BQVFBLEdBQ2ZELEVBQVV0QixLQUFLd0IsTUFBTXhCLEtBQUtFLFVBQVlxQixFQUFNLElBQzVDRixFQUFNRCxFQUFNRSxHQUNaRixFQUFNRSxHQUFXRixFQUFNRyxHQUN2QkgsRUFBTUcsR0FBT0YsQ0FFZCxPQUFPRCxJQXNCUkssTUFBTyxXQUNOLEdBQUk5QyxHQUFPakMsSUFDWGdGLGVBQWMvQyxFQUFLQyxRQUNWbEMsTUFBS0YsR0FBR1MsS0FBSyxLQUN0QlAsTUFBS0YsR0FBR21GLFFBQ21CLG1CQUFoQmpGLE1BQUt3QyxRQUNYeEMsS0FBS3dDLE9BQU8wQyxTQUVqQmxGLEtBQUtrQixPQUFTLEVBQ2RsQixLQUFLbUIsU0FBVyxFQUNoQm5CLEtBQUt1QixRQUFVLEVBRWZ2QixLQUFLRCxRQUFRb0Ysa0JBS2Z2RixFQUFFTSxHQUFHQyxNQUFRLFNBQVNpRixHQUNyQixNQUFPcEYsTUFBSzRDLEtBQUssV0FDaEIsR0FBSXlDLEdBQVF6RixFQUFFSSxNQUNic0YsRUFBT0QsRUFBTUMsS0FBSyxTQUNsQnZGLEVBQTJCLGdCQUFWcUYsSUFBc0JBLENBQ3BDRSxJQUFRQSxFQUFLUCxRQUNqQk0sRUFBTUMsS0FBSyxRQUFVQSxFQUFPLEdBQUl6RixHQUFNRyxLQUFNRCxJQUN2QixnQkFBVnFGLElBQW9CRSxFQUFLRixRQUl0Q3hGLEVBQUVNLEdBQUdDLE1BQU1DLFVBQ1ZhLFNBQVUsa0NBQW1DLCtCQUFnQyxnQkFBaUIscUJBQzlGRCxlQUFnQixLQUVoQkosVUFBVyxFQUVYQyxXQUFZLEVBRVpDLFVBQVcsRUFFWGEsU0FBUyxFQUVUWixVQUFXLElBRVhNLE1BQU0sRUFFTkMsV0FBVyxFQUVYZCxZQUFZLEVBRVppQixXQUFZLElBRVpDLFlBQWEsZUFFYm5CLEtBQU0sS0FFTkksWUFBYSxPQUViMEQsU0FBVSxhQUVWRSxlQUFnQixhQUVoQkgsY0FBZSxhQUVmZSxjQUFlLGVBSWZJLE9BQU9DIiwiZmlsZSI6InR5cGVkLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuXG4vLyBUeXBlZC5qcyB8IENvcHlyaWdodCAoYykgMjAxNiBNYXR0IEJvbGR0IHwgd3d3Lm1hdHRib2xkdC5jb21cblxuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuLy8gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuLy8gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuLy8gY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4vLyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG5cblxuXG4hIGZ1bmN0aW9uKCQpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgVHlwZWQgPSBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xuXG5cdFx0Ly8gY2hvc2VuIGVsZW1lbnQgdG8gbWFuaXB1bGF0ZSB0ZXh0XG5cdFx0dGhpcy5lbCA9ICQoZWwpO1xuXG5cdFx0Ly8gb3B0aW9uc1xuXHRcdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnR5cGVkLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuXHRcdC8vIGF0dHJpYnV0ZSB0byB0eXBlIGludG9cblx0XHR0aGlzLmlzSW5wdXQgPSB0aGlzLmVsLmlzKCdpbnB1dCcpO1xuXHRcdHRoaXMuYXR0ciA9IHRoaXMub3B0aW9ucy5hdHRyO1xuXG5cdFx0Ly8gc2hvdyBjdXJzb3Jcblx0XHR0aGlzLnNob3dDdXJzb3IgPSB0aGlzLmlzSW5wdXQgPyBmYWxzZSA6IHRoaXMub3B0aW9ucy5zaG93Q3Vyc29yO1xuXG5cdFx0Ly8gdGV4dCBjb250ZW50IG9mIGVsZW1lbnRcblx0XHR0aGlzLmVsQ29udGVudCA9IHRoaXMuYXR0ciA/IHRoaXMuZWwuYXR0cih0aGlzLmF0dHIpIDogdGhpcy5lbC50ZXh0KCk7XG5cblx0XHQvLyBodG1sIG9yIHBsYWluIHRleHRcblx0XHR0aGlzLmNvbnRlbnRUeXBlID0gdGhpcy5vcHRpb25zLmNvbnRlbnRUeXBlO1xuXG5cdFx0Ly8gdHlwaW5nIHNwZWVkXG5cdFx0dGhpcy50eXBlU3BlZWQgPSB0aGlzLm9wdGlvbnMudHlwZVNwZWVkO1xuXG5cdFx0Ly8gYWRkIGEgZGVsYXkgYmVmb3JlIHR5cGluZyBzdGFydHNcblx0XHR0aGlzLnN0YXJ0RGVsYXkgPSB0aGlzLm9wdGlvbnMuc3RhcnREZWxheTtcblxuXHRcdC8vIGJhY2tzcGFjaW5nIHNwZWVkXG5cdFx0dGhpcy5iYWNrU3BlZWQgPSB0aGlzLm9wdGlvbnMuYmFja1NwZWVkO1xuXG5cdFx0Ly8gYW1vdW50IG9mIHRpbWUgdG8gd2FpdCBiZWZvcmUgYmFja3NwYWNpbmdcblx0XHR0aGlzLmJhY2tEZWxheSA9IHRoaXMub3B0aW9ucy5iYWNrRGVsYXk7XG5cblx0XHQvLyBkaXYgY29udGFpbmluZyBzdHJpbmdzXG5cdFx0dGhpcy5zdHJpbmdzRWxlbWVudCA9IHRoaXMub3B0aW9ucy5zdHJpbmdzRWxlbWVudDtcblxuXHRcdC8vIGlucHV0IHN0cmluZ3Mgb2YgdGV4dFxuXHRcdHRoaXMuc3RyaW5ncyA9IHRoaXMub3B0aW9ucy5zdHJpbmdzO1xuXG5cdFx0Ly8gY2hhcmFjdGVyIG51bWJlciBwb3NpdGlvbiBvZiBjdXJyZW50IHN0cmluZ1xuXHRcdHRoaXMuc3RyUG9zID0gMDtcblxuXHRcdC8vIGN1cnJlbnQgYXJyYXkgcG9zaXRpb25cblx0XHR0aGlzLmFycmF5UG9zID0gMDtcblxuXHRcdC8vIG51bWJlciB0byBzdG9wIGJhY2tzcGFjaW5nIG9uLlxuXHRcdC8vIGRlZmF1bHQgMCwgY2FuIGNoYW5nZSBkZXBlbmRpbmcgb24gaG93IG1hbnkgY2hhcnNcblx0XHQvLyB5b3Ugd2FudCB0byByZW1vdmUgYXQgdGhlIHRpbWVcblx0XHR0aGlzLnN0b3BOdW0gPSAwO1xuXG5cdFx0Ly8gTG9vcGluZyBsb2dpY1xuXHRcdHRoaXMubG9vcCA9IHRoaXMub3B0aW9ucy5sb29wO1xuXHRcdHRoaXMubG9vcENvdW50ID0gdGhpcy5vcHRpb25zLmxvb3BDb3VudDtcblx0XHR0aGlzLmN1ckxvb3AgPSAwO1xuXG5cdFx0Ly8gZm9yIHN0b3BwaW5nXG5cdFx0dGhpcy5zdG9wID0gZmFsc2U7XG5cblx0XHQvLyBjdXN0b20gY3Vyc29yXG5cdFx0dGhpcy5jdXJzb3JDaGFyID0gdGhpcy5vcHRpb25zLmN1cnNvckNoYXI7XG5cblx0XHQvLyAoYWRkZWQgYnkgVGhpanMgTWVldXdpc3NlKVxuXHRcdC8vIGN1c3RvbSBjdXJzb3IgY2xhc3Ncblx0XHR0aGlzLmN1cnNvckNsYXNzID0gdGhpcy5vcHRpb25zLmN1cnNvckNsYXNzO1xuXG5cdFx0Ly8gc2h1ZmZsZSB0aGUgc3RyaW5nc1xuXHRcdHRoaXMuc2h1ZmZsZSA9IHRoaXMub3B0aW9ucy5zaHVmZmxlO1xuXHRcdC8vIHRoZSBvcmRlciBvZiBzdHJpbmdzXG5cdFx0dGhpcy5zZXF1ZW5jZSA9IFtdO1xuXG5cdFx0Ly8gQWxsIHN5c3RlbXMgZ28hXG5cdFx0dGhpcy5idWlsZCgpO1xuXHR9O1xuXG5cdFR5cGVkLnByb3RvdHlwZSA9IHtcblxuXHRcdGNvbnN0cnVjdG9yOiBUeXBlZCxcblxuXHRcdGluaXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gYmVnaW4gdGhlIGxvb3Agdy8gZmlyc3QgY3VycmVudCBzdHJpbmcgKGdsb2JhbCBzZWxmLnN0cmluZ3MpXG5cdFx0XHQvLyBjdXJyZW50IHN0cmluZyB3aWxsIGJlIHBhc3NlZCBhcyBhbiBhcmd1bWVudCBlYWNoIHRpbWUgYWZ0ZXIgdGhpc1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0Zm9yICh2YXIgaT0wO2k8c2VsZi5zdHJpbmdzLmxlbmd0aDsrK2kpIHNlbGYuc2VxdWVuY2VbaV09aTtcblxuXHRcdFx0XHQvLyBzaHVmZmxlIHRoZSBhcnJheSBpZiB0cnVlXG5cdFx0XHRcdGlmKHNlbGYuc2h1ZmZsZSkgc2VsZi5zZXF1ZW5jZSA9IHNlbGYuc2h1ZmZsZUFycmF5KHNlbGYuc2VxdWVuY2UpO1xuXG5cdFx0XHRcdC8vIFN0YXJ0IHR5cGluZ1xuXHRcdFx0XHRzZWxmLnR5cGV3cml0ZShzZWxmLnN0cmluZ3Nbc2VsZi5zZXF1ZW5jZVtzZWxmLmFycmF5UG9zXV0sIHNlbGYuc3RyUG9zKTtcblx0XHRcdH0sIHNlbGYuc3RhcnREZWxheSk7XG5cdFx0fSxcblxuXHRcdGJ1aWxkOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblx0XHRcdC8vIEluc2VydCBjdXJzb3Jcblx0XHRcdGlmICh0aGlzLnNob3dDdXJzb3IgPT09IHRydWUpIHtcblx0XHRcdFx0dGhpcy5jdXJzb3IgPSAkKFwiPHNwYW4gY2xhc3M9XFxcIlwiICsgdGhpcy5jdXJzb3JDbGFzcyArIFwiXFxcIj5cIiArIHRoaXMuY3Vyc29yQ2hhciArIFwiPC9zcGFuPlwiKTtcblx0XHRcdFx0dGhpcy5lbC5hZnRlcih0aGlzLmN1cnNvcik7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5zdHJpbmdzRWxlbWVudCkge1xuXHRcdFx0XHR0aGlzLnN0cmluZ3MgPSBbXTtcblx0XHRcdFx0dGhpcy5zdHJpbmdzRWxlbWVudC5oaWRlKCk7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHRoaXMuc3RyaW5nc0VsZW1lbnQuY2hpbGRyZW4oKSk7XG5cdFx0XHRcdHZhciBzdHJpbmdzID0gdGhpcy5zdHJpbmdzRWxlbWVudC5jaGlsZHJlbigpO1xuXHRcdFx0XHQkLmVhY2goc3RyaW5ncywgZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG5cdFx0XHRcdFx0c2VsZi5zdHJpbmdzLnB1c2goJCh2YWx1ZSkuaHRtbCgpKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLmluaXQoKTtcblx0XHR9LFxuXG5cdFx0Ly8gcGFzcyBjdXJyZW50IHN0cmluZyBzdGF0ZSB0byBlYWNoIGZ1bmN0aW9uLCB0eXBlcyAxIGNoYXIgcGVyIGNhbGxcblx0XHR0eXBld3JpdGU6IGZ1bmN0aW9uKGN1clN0cmluZywgY3VyU3RyUG9zKSB7XG5cdFx0XHQvLyBleGl0IHdoZW4gc3RvcHBlZFxuXHRcdFx0aWYgKHRoaXMuc3RvcCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcImN1cnJlbnRseSBzdG9wcGVkLiBzYWxsYVwiKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB2YXJ5aW5nIHZhbHVlcyBmb3Igc2V0VGltZW91dCBkdXJpbmcgdHlwaW5nXG5cdFx0XHQvLyBjYW4ndCBiZSBnbG9iYWwgc2luY2UgbnVtYmVyIGNoYW5nZXMgZWFjaCB0aW1lIGxvb3AgaXMgZXhlY3V0ZWRcblx0XHRcdHZhciBodW1hbml6ZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICgxMDAgLSAzMCkpICsgdGhpcy50eXBlU3BlZWQ7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vIC0tLS0tLS0tLS0tLS0gb3B0aW9uYWwgLS0tLS0tLS0tLS0tLSAvL1xuXHRcdFx0Ly8gYmFja3BhY2VzIGEgY2VydGFpbiBzdHJpbmcgZmFzdGVyXG5cdFx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cblx0XHRcdC8vIGlmIChzZWxmLmFycmF5UG9zID09IDEpe1xuXHRcdFx0Ly8gIHNlbGYuYmFja0RlbGF5ID0gNTA7XG5cdFx0XHQvLyB9XG5cdFx0XHQvLyBlbHNleyBzZWxmLmJhY2tEZWxheSA9IDUwMDsgfVxuXG5cdFx0XHQvLyBjb250YWluIHR5cGluZyBmdW5jdGlvbiBpbiBhIHRpbWVvdXQgaHVtYW5pemUnZCBkZWxheVxuXHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gY2hlY2sgZm9yIGFuIGVzY2FwZSBjaGFyYWN0ZXIgYmVmb3JlIGEgcGF1c2UgdmFsdWVcblx0XHRcdFx0Ly8gZm9ybWF0OiBcXF5cXGQrIC4uIGVnOiBeMTAwMCAuLiBzaG91bGQgYmUgYWJsZSB0byBwcmludCB0aGUgXiB0b28gdXNpbmcgXl5cblx0XHRcdFx0Ly8gc2luZ2xlIF4gYXJlIHJlbW92ZWQgZnJvbSBzdHJpbmdcblx0XHRcdFx0dmFyIGNoYXJQYXVzZSA9IDA7XG5cdFx0XHRcdHZhciBzdWJzdHIgPSBjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcyk7XG5cdFx0XHRcdGlmIChzdWJzdHIuY2hhckF0KDApID09PSAnXicpIHtcblx0XHRcdFx0XHR2YXIgc2tpcCA9IDE7IC8vIHNraXAgYXRsZWFzdCAxXG5cdFx0XHRcdFx0aWYgKC9eXFxeXFxkKy8udGVzdChzdWJzdHIpKSB7XG5cdFx0XHRcdFx0XHRzdWJzdHIgPSAvXFxkKy8uZXhlYyhzdWJzdHIpWzBdO1xuXHRcdFx0XHRcdFx0c2tpcCArPSBzdWJzdHIubGVuZ3RoO1xuXHRcdFx0XHRcdFx0Y2hhclBhdXNlID0gcGFyc2VJbnQoc3Vic3RyKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBzdHJpcCBvdXQgdGhlIGVzY2FwZSBjaGFyYWN0ZXIgYW5kIHBhdXNlIHZhbHVlIHNvIHRoZXkncmUgbm90IHByaW50ZWRcblx0XHRcdFx0XHRjdXJTdHJpbmcgPSBjdXJTdHJpbmcuc3Vic3RyaW5nKDAsIGN1clN0clBvcykgKyBjdXJTdHJpbmcuc3Vic3RyaW5nKGN1clN0clBvcyArIHNraXApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdC8vIHNraXAgb3ZlciBodG1sIHRhZ3Mgd2hpbGUgdHlwaW5nXG5cdFx0XHRcdFx0dmFyIGN1ckNoYXIgPSBjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcykuY2hhckF0KDApXG5cdFx0XHRcdFx0aWYgKGN1ckNoYXIgPT09ICc8JyB8fCBjdXJDaGFyID09PSAnJicpIHtcblx0XHRcdFx0XHRcdHZhciB0YWcgPSAnJztcblx0XHRcdFx0XHRcdHZhciBlbmRUYWcgPSAnJztcblx0XHRcdFx0XHRcdGlmIChjdXJDaGFyID09PSAnPCcpIHtcblx0XHRcdFx0XHRcdFx0ZW5kVGFnID0gJz4nXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZW5kVGFnID0gJzsnXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR3aGlsZSAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MgKyAxKS5jaGFyQXQoMCkgIT09IGVuZFRhZykge1xuXHRcdFx0XHRcdFx0XHR0YWcgKz0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKTtcblx0XHRcdFx0XHRcdFx0Y3VyU3RyUG9zKys7XG5cdFx0XHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgKyAxID4gY3VyU3RyaW5nLmxlbmd0aCkgeyBicmVhazsgfVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y3VyU3RyUG9zKys7XG5cdFx0XHRcdFx0XHR0YWcgKz0gZW5kVGFnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHRpbWVvdXQgZm9yIGFueSBwYXVzZSBhZnRlciBhIGNoYXJhY3RlclxuXHRcdFx0XHRzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmIChjdXJTdHJQb3MgPT09IGN1clN0cmluZy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdC8vIGZpcmVzIGNhbGxiYWNrIGZ1bmN0aW9uXG5cdFx0XHRcdFx0XHRzZWxmLm9wdGlvbnMub25TdHJpbmdUeXBlZChzZWxmLmFycmF5UG9zKTtcblxuXHRcdFx0XHRcdFx0Ly8gaXMgdGhpcyB0aGUgZmluYWwgc3RyaW5nXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5hcnJheVBvcyA9PT0gc2VsZi5zdHJpbmdzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdFx0Ly8gYW5pbWF0aW9uIHRoYXQgb2NjdXJzIG9uIHRoZSBsYXN0IHR5cGVkIHN0cmluZ1xuXHRcdFx0XHRcdFx0XHRzZWxmLm9wdGlvbnMuY2FsbGJhY2soKTtcblxuXHRcdFx0XHRcdFx0XHRzZWxmLmN1ckxvb3ArKztcblxuXHRcdFx0XHRcdFx0XHQvLyBxdWl0IGlmIHdlIHdvbnQgbG9vcCBiYWNrXG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLmxvb3AgPT09IGZhbHNlIHx8IHNlbGYuY3VyTG9vcCA9PT0gc2VsZi5sb29wQ291bnQpXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmJhY2tzcGFjZShjdXJTdHJpbmcsIGN1clN0clBvcyk7XG5cdFx0XHRcdFx0XHR9LCBzZWxmLmJhY2tEZWxheSk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQvKiBjYWxsIGJlZm9yZSBmdW5jdGlvbnMgaWYgYXBwbGljYWJsZSAqL1xuXHRcdFx0XHRcdFx0aWYgKGN1clN0clBvcyA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLm9wdGlvbnMucHJlU3RyaW5nVHlwZWQoc2VsZi5hcnJheVBvcyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIHN0YXJ0IHR5cGluZyBlYWNoIG5ldyBjaGFyIGludG8gZXhpc3Rpbmcgc3RyaW5nXG5cdFx0XHRcdFx0XHQvLyBjdXJTdHJpbmc6IGFyZywgc2VsZi5lbC5odG1sOiBvcmlnaW5hbCB0ZXh0IGluc2lkZSBlbGVtZW50XG5cdFx0XHRcdFx0XHR2YXIgbmV4dFN0cmluZyA9IGN1clN0cmluZy5zdWJzdHIoMCwgY3VyU3RyUG9zICsgMSk7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5hdHRyKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuZWwuYXR0cihzZWxmLmF0dHIsIG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuaXNJbnB1dCkge1xuXHRcdFx0XHRcdFx0XHRcdHNlbGYuZWwudmFsKG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuXHRcdFx0XHRcdFx0XHRcdHNlbGYuZWwuaHRtbChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmVsLnRleHQobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gYWRkIGNoYXJhY3RlcnMgb25lIGJ5IG9uZVxuXHRcdFx0XHRcdFx0Y3VyU3RyUG9zKys7XG5cdFx0XHRcdFx0XHQvLyBsb29wIHRoZSBmdW5jdGlvblxuXHRcdFx0XHRcdFx0c2VsZi50eXBld3JpdGUoY3VyU3RyaW5nLCBjdXJTdHJQb3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBlbmQgb2YgY2hhcmFjdGVyIHBhdXNlXG5cdFx0XHRcdH0sIGNoYXJQYXVzZSk7XG5cblx0XHRcdFx0Ly8gaHVtYW5pemVkIHZhbHVlIGZvciB0eXBpbmdcblx0XHRcdH0sIGh1bWFuaXplKTtcblxuXHRcdH0sXG5cblx0XHRiYWNrc3BhY2U6IGZ1bmN0aW9uKGN1clN0cmluZywgY3VyU3RyUG9zKSB7XG5cdFx0XHQvLyBleGl0IHdoZW4gc3RvcHBlZFxuXHRcdFx0aWYgKHRoaXMuc3RvcCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIHZhcnlpbmcgdmFsdWVzIGZvciBzZXRUaW1lb3V0IGR1cmluZyB0eXBpbmdcblx0XHRcdC8vIGNhbid0IGJlIGdsb2JhbCBzaW5jZSBudW1iZXIgY2hhbmdlcyBlYWNoIHRpbWUgbG9vcCBpcyBleGVjdXRlZFxuXHRcdFx0dmFyIGh1bWFuaXplID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKDEwMCAtIDMwKSkgKyB0aGlzLmJhY2tTcGVlZDtcblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0c2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyAtLS0tLSB0aGlzIHBhcnQgaXMgb3B0aW9uYWwgLS0tLS0gLy9cblx0XHRcdFx0Ly8gY2hlY2sgc3RyaW5nIGFycmF5IHBvc2l0aW9uXG5cdFx0XHRcdC8vIG9uIHRoZSBmaXJzdCBzdHJpbmcsIG9ubHkgZGVsZXRlIG9uZSB3b3JkXG5cdFx0XHRcdC8vIHRoZSBzdG9wTnVtIGFjdHVhbGx5IHJlcHJlc2VudHMgdGhlIGFtb3VudCBvZiBjaGFycyB0b1xuXHRcdFx0XHQvLyBrZWVwIGluIHRoZSBjdXJyZW50IHN0cmluZy4gSW4gbXkgY2FzZSBpdCdzIDE0LlxuXHRcdFx0XHQvLyBpZiAoc2VsZi5hcnJheVBvcyA9PSAxKXtcblx0XHRcdFx0Ly8gIHNlbGYuc3RvcE51bSA9IDE0O1xuXHRcdFx0XHQvLyB9XG5cdFx0XHRcdC8vZXZlcnkgb3RoZXIgdGltZSwgZGVsZXRlIHRoZSB3aG9sZSB0eXBlZCBzdHJpbmdcblx0XHRcdFx0Ly8gZWxzZXtcblx0XHRcdFx0Ly8gIHNlbGYuc3RvcE51bSA9IDA7XG5cdFx0XHRcdC8vIH1cblxuXHRcdFx0XHRpZiAoc2VsZi5jb250ZW50VHlwZSA9PT0gJ2h0bWwnKSB7XG5cdFx0XHRcdFx0Ly8gc2tpcCBvdmVyIGh0bWwgdGFncyB3aGlsZSBiYWNrc3BhY2luZ1xuXHRcdFx0XHRcdGlmIChjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcykuY2hhckF0KDApID09PSAnPicpIHtcblx0XHRcdFx0XHRcdHZhciB0YWcgPSAnJztcblx0XHRcdFx0XHRcdHdoaWxlIChjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcyAtIDEpLmNoYXJBdCgwKSAhPT0gJzwnKSB7XG5cdFx0XHRcdFx0XHRcdHRhZyAtPSBjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcykuY2hhckF0KDApO1xuXHRcdFx0XHRcdFx0XHRjdXJTdHJQb3MtLTtcblx0XHRcdFx0XHRcdFx0aWYgKGN1clN0clBvcyA8IDApIHsgYnJlYWs7IH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGN1clN0clBvcy0tO1xuXHRcdFx0XHRcdFx0dGFnICs9ICc8Jztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyAtLS0tLSBjb250aW51ZSBpbXBvcnRhbnQgc3R1ZmYgLS0tLS0gLy9cblx0XHRcdFx0Ly8gcmVwbGFjZSB0ZXh0IHdpdGggYmFzZSB0ZXh0ICsgdHlwZWQgY2hhcmFjdGVyc1xuXHRcdFx0XHR2YXIgbmV4dFN0cmluZyA9IGN1clN0cmluZy5zdWJzdHIoMCwgY3VyU3RyUG9zKTtcblx0XHRcdFx0aWYgKHNlbGYuYXR0cikge1xuXHRcdFx0XHRcdHNlbGYuZWwuYXR0cihzZWxmLmF0dHIsIG5leHRTdHJpbmcpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChzZWxmLmlzSW5wdXQpIHtcblx0XHRcdFx0XHRcdHNlbGYuZWwudmFsKG5leHRTdHJpbmcpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoc2VsZi5jb250ZW50VHlwZSA9PT0gJ2h0bWwnKSB7XG5cdFx0XHRcdFx0XHRzZWxmLmVsLmh0bWwobmV4dFN0cmluZyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuZWwudGV4dChuZXh0U3RyaW5nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpZiB0aGUgbnVtYmVyIChpZCBvZiBjaGFyYWN0ZXIgaW4gY3VycmVudCBzdHJpbmcpIGlzXG5cdFx0XHRcdC8vIGxlc3MgdGhhbiB0aGUgc3RvcCBudW1iZXIsIGtlZXAgZ29pbmdcblx0XHRcdFx0aWYgKGN1clN0clBvcyA+IHNlbGYuc3RvcE51bSkge1xuXHRcdFx0XHRcdC8vIHN1YnRyYWN0IGNoYXJhY3RlcnMgb25lIGJ5IG9uZVxuXHRcdFx0XHRcdGN1clN0clBvcy0tO1xuXHRcdFx0XHRcdC8vIGxvb3AgdGhlIGZ1bmN0aW9uXG5cdFx0XHRcdFx0c2VsZi5iYWNrc3BhY2UoY3VyU3RyaW5nLCBjdXJTdHJQb3MpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGlmIHRoZSBzdG9wIG51bWJlciBoYXMgYmVlbiByZWFjaGVkLCBpbmNyZWFzZVxuXHRcdFx0XHQvLyBhcnJheSBwb3NpdGlvbiB0byBuZXh0IHN0cmluZ1xuXHRcdFx0XHRlbHNlIGlmIChjdXJTdHJQb3MgPD0gc2VsZi5zdG9wTnVtKSB7XG5cdFx0XHRcdFx0c2VsZi5hcnJheVBvcysrO1xuXG5cdFx0XHRcdFx0aWYgKHNlbGYuYXJyYXlQb3MgPT09IHNlbGYuc3RyaW5ncy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdHNlbGYuYXJyYXlQb3MgPSAwO1xuXG5cdFx0XHRcdFx0XHQvLyBTaHVmZmxlIHNlcXVlbmNlIGFnYWluXG5cdFx0XHRcdFx0XHRpZihzZWxmLnNodWZmbGUpIHNlbGYuc2VxdWVuY2UgPSBzZWxmLnNodWZmbGVBcnJheShzZWxmLnNlcXVlbmNlKTtcblxuXHRcdFx0XHRcdFx0c2VsZi5pbml0KCk7XG5cdFx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0XHRzZWxmLnR5cGV3cml0ZShzZWxmLnN0cmluZ3Nbc2VsZi5zZXF1ZW5jZVtzZWxmLmFycmF5UG9zXV0sIGN1clN0clBvcyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBodW1hbml6ZWQgdmFsdWUgZm9yIHR5cGluZ1xuXHRcdFx0fSwgaHVtYW5pemUpO1xuXG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBTaHVmZmxlcyB0aGUgbnVtYmVycyBpbiB0aGUgZ2l2ZW4gYXJyYXkuXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXlcblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9XG5cdFx0ICovXG5cdFx0c2h1ZmZsZUFycmF5OiBmdW5jdGlvbihhcnJheSkge1xuXHRcdFx0dmFyIHRtcCwgY3VycmVudCwgdG9wID0gYXJyYXkubGVuZ3RoO1xuXHRcdFx0aWYodG9wKSB3aGlsZSgtLXRvcCkge1xuXHRcdFx0XHRjdXJyZW50ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHRvcCArIDEpKTtcblx0XHRcdFx0dG1wID0gYXJyYXlbY3VycmVudF07XG5cdFx0XHRcdGFycmF5W2N1cnJlbnRdID0gYXJyYXlbdG9wXTtcblx0XHRcdFx0YXJyYXlbdG9wXSA9IHRtcDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBhcnJheTtcblx0XHR9LFxuXG5cdFx0Ly8gU3RhcnQgJiBTdG9wIGN1cnJlbnRseSBub3Qgd29ya2luZ1xuXG5cdFx0Ly8gLCBzdG9wOiBmdW5jdGlvbigpIHtcblx0XHQvLyAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0Ly8gICAgIHNlbGYuc3RvcCA9IHRydWU7XG5cdFx0Ly8gICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lb3V0KTtcblx0XHQvLyB9XG5cblx0XHQvLyAsIHN0YXJ0OiBmdW5jdGlvbigpIHtcblx0XHQvLyAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHRcdC8vICAgICBpZihzZWxmLnN0b3AgPT09IGZhbHNlKVxuXHRcdC8vICAgICAgICByZXR1cm47XG5cblx0XHQvLyAgICAgdGhpcy5zdG9wID0gZmFsc2U7XG5cdFx0Ly8gICAgIHRoaXMuaW5pdCgpO1xuXHRcdC8vIH1cblxuXHRcdC8vIFJlc2V0IGFuZCByZWJ1aWxkIHRoZSBlbGVtZW50XG5cdFx0cmVzZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFx0Y2xlYXJJbnRlcnZhbChzZWxmLnRpbWVvdXQpO1xuXHRcdFx0dmFyIGlkID0gdGhpcy5lbC5hdHRyKCdpZCcpO1xuXHRcdFx0dGhpcy5lbC5lbXB0eSgpO1xuXHRcdFx0aWYgKHR5cGVvZiB0aGlzLmN1cnNvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5jdXJzb3IucmVtb3ZlKCk7XG4gICAgICB9XG5cdFx0XHR0aGlzLnN0clBvcyA9IDA7XG5cdFx0XHR0aGlzLmFycmF5UG9zID0gMDtcblx0XHRcdHRoaXMuY3VyTG9vcCA9IDA7XG5cdFx0XHQvLyBTZW5kIHRoZSBjYWxsYmFja1xuXHRcdFx0dGhpcy5vcHRpb25zLnJlc2V0Q2FsbGJhY2soKTtcblx0XHR9XG5cblx0fTtcblxuXHQkLmZuLnR5cGVkID0gZnVuY3Rpb24ob3B0aW9uKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyksXG5cdFx0XHRcdGRhdGEgPSAkdGhpcy5kYXRhKCd0eXBlZCcpLFxuXHRcdFx0XHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb247XG5cdFx0XHRpZiAoZGF0YSkgeyBkYXRhLnJlc2V0KCk7IH1cblx0XHRcdCR0aGlzLmRhdGEoJ3R5cGVkJywgKGRhdGEgPSBuZXcgVHlwZWQodGhpcywgb3B0aW9ucykpKTtcblx0XHRcdGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKTtcblx0XHR9KTtcblx0fTtcblxuXHQkLmZuLnR5cGVkLmRlZmF1bHRzID0ge1xuXHRcdHN0cmluZ3M6IFtcIlRoZXNlIGFyZSB0aGUgZGVmYXVsdCB2YWx1ZXMuLi5cIiwgXCJZb3Uga25vdyB3aGF0IHlvdSBzaG91bGQgZG8/XCIsIFwiVXNlIHlvdXIgb3duIVwiLCBcIkhhdmUgYSBncmVhdCBkYXkhXCJdLFxuXHRcdHN0cmluZ3NFbGVtZW50OiBudWxsLFxuXHRcdC8vIHR5cGluZyBzcGVlZFxuXHRcdHR5cGVTcGVlZDogMCxcblx0XHQvLyB0aW1lIGJlZm9yZSB0eXBpbmcgc3RhcnRzXG5cdFx0c3RhcnREZWxheTogMCxcblx0XHQvLyBiYWNrc3BhY2luZyBzcGVlZFxuXHRcdGJhY2tTcGVlZDogMCxcblx0XHQvLyBzaHVmZmxlIHRoZSBzdHJpbmdzXG5cdFx0c2h1ZmZsZTogZmFsc2UsXG5cdFx0Ly8gdGltZSBiZWZvcmUgYmFja3NwYWNpbmdcblx0XHRiYWNrRGVsYXk6IDUwMCxcblx0XHQvLyBsb29wXG5cdFx0bG9vcDogZmFsc2UsXG5cdFx0Ly8gZmFsc2UgPSBpbmZpbml0ZVxuXHRcdGxvb3BDb3VudDogZmFsc2UsXG5cdFx0Ly8gc2hvdyBjdXJzb3Jcblx0XHRzaG93Q3Vyc29yOiB0cnVlLFxuXHRcdC8vIGNoYXJhY3RlciBmb3IgY3Vyc29yXG5cdFx0Y3Vyc29yQ2hhcjogXCJ8XCIsXG5cdFx0Ly8gKGFkZGVkIGJ5IFRoaWpzKSBjbGFzcyBmb3IgY3Vyc29yXG5cdFx0Y3Vyc29yQ2xhc3M6IFwidHlwZWQtY3Vyc29yXCIsXG5cdFx0Ly8gYXR0cmlidXRlIHRvIHR5cGUgKG51bGwgPT0gdGV4dClcblx0XHRhdHRyOiBudWxsLFxuXHRcdC8vIGVpdGhlciBodG1sIG9yIHRleHRcblx0XHRjb250ZW50VHlwZTogJ2h0bWwnLFxuXHRcdC8vIGNhbGwgd2hlbiBkb25lIGNhbGxiYWNrIGZ1bmN0aW9uXG5cdFx0Y2FsbGJhY2s6IGZ1bmN0aW9uKCkge30sXG5cdFx0Ly8gc3RhcnRpbmcgY2FsbGJhY2sgZnVuY3Rpb24gYmVmb3JlIGVhY2ggc3RyaW5nXG5cdFx0cHJlU3RyaW5nVHlwZWQ6IGZ1bmN0aW9uKCkge30sXG5cdFx0Ly9jYWxsYmFjayBmb3IgZXZlcnkgdHlwZWQgc3RyaW5nXG5cdFx0b25TdHJpbmdUeXBlZDogZnVuY3Rpb24oKSB7fSxcblx0XHQvLyBjYWxsYmFjayBmb3IgcmVzZXRcblx0XHRyZXNldENhbGxiYWNrOiBmdW5jdGlvbigpIHt9XG5cdH07XG5cblxufSh3aW5kb3cualF1ZXJ5KTtcbiJdfQ==
