!function(t){"use strict";var s=function(s,o){this.el=t(s),this.options=t.extend({},t.fn.typed.defaults,o),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=!this.isInput&&this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.backspacing=!1,this.cursorChar=this.options.cursorChar,this.build()};s.prototype={constructor:s,init:function(){var t=this;t.timeout=setTimeout(function(){t.backspacing?t.backspace(t.strings[t.arrayPos],t.strPos):t.typewrite(t.strings[t.arrayPos],t.strPos)},t.startDelay)},build:function(){this.showCursor===!0&&(this.cursor=t('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.init()},typewrite:function(t,s){if(this.stop!==!0){var o=Math.round(70*Math.random())+this.typeSpeed,i=this;i.strPos=s,i.backspacing=!1,i.timeout=setTimeout(function(){var o=0,e=t.substr(s);if("^"===e.charAt(0)){var r=1;/^\^\d+/.test(e)&&(e=/\d+/.exec(e)[0],r+=e.length,o=parseInt(e)),t=t.substring(0,s)+t.substring(s+r)}if("html"===i.contentType&&"<"===t.substr(s).charAt(0)){for(var n="";">"!==t.substr(s).charAt(0);)n+=t.substr(s).charAt(0),s++;s++,n+=">"}i.timeout=setTimeout(function(){if(s===t.length){if(i.options.onStringTyped(i.arrayPos),i.arrayPos===i.strings.length-1&&(i.options.callback(),i.curLoop++,i.loop===!1||i.curLoop===i.loopCount))return;i.timeout=setTimeout(function(){i.backspace(t,s)},i.backDelay)}else{0===s&&i.options.preStringTyped(i.arrayPos);var o=i.elContent+t.substr(0,s+1);i.attr?i.el.attr(i.attr,o):"html"===i.contentType?i.el.html(o):i.el.text(o),s++,i.typewrite(t,s)}},o)},o)}},backspace:function(t,s){if(this.stop!==!0){var o=Math.round(70*Math.random())+this.backSpeed,i=this;i.strPos=s,i.backspacing=!0,i.timeout=setTimeout(function(){if("html"===i.contentType&&">"===t.substr(s).charAt(0)){for(var o="";"<"!==t.substr(s).charAt(0);)o-=t.substr(s).charAt(0),s--;s--,o+="<"}var e=i.elContent+t.substr(0,s);i.attr?i.el.attr(i.attr,e):"html"===i.contentType?i.el.html(e):i.el.text(e),s>i.stopNum?(s--,i.backspace(t,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.backspacing=!1,i.arrayPos=0,i.init()):i.typewrite(i.strings[i.arrayPos],s))},o)}},pauseTyping:function(){console.log("typing paused");var t=this;t.stop=!0,clearInterval(t.timeout)},continueTyping:function(){var t=this;console.log(t.stop),t.stop!==!1&&(this.stop=!1,this.init())},reset:function(){var t=this;clearInterval(t.timeout);var s=this.el.attr("id");this.el.after('<span id="'+s+'"/>'),this.el.remove(),this.cursor.remove(),t.options.resetCallback()}},t.fn.typed=function(o){return this.each(function(){var i=t(this),e=i.data("typed"),r="object"==typeof o&&o;e||i.data("typed",e=new s(this,r)),"string"==typeof o&&e[o]()})},t.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],typeSpeed:0,startDelay:0,backSpeed:0,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR5cGVkMi5qcyJdLCJuYW1lcyI6WyIkIiwiVHlwZWQiLCJlbCIsIm9wdGlvbnMiLCJ0aGlzIiwiZXh0ZW5kIiwiZm4iLCJ0eXBlZCIsImRlZmF1bHRzIiwiaXNJbnB1dCIsImlzIiwiYXR0ciIsInNob3dDdXJzb3IiLCJlbENvbnRlbnQiLCJ0ZXh0IiwiY29udGVudFR5cGUiLCJ0eXBlU3BlZWQiLCJzdGFydERlbGF5IiwiYmFja1NwZWVkIiwiYmFja0RlbGF5Iiwic3RyaW5ncyIsInN0clBvcyIsImFycmF5UG9zIiwic3RvcE51bSIsImxvb3AiLCJsb29wQ291bnQiLCJjdXJMb29wIiwic3RvcCIsImJhY2tzcGFjaW5nIiwiY3Vyc29yQ2hhciIsImJ1aWxkIiwicHJvdG90eXBlIiwiY29uc3RydWN0b3IiLCJpbml0Iiwic2VsZiIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiYmFja3NwYWNlIiwidHlwZXdyaXRlIiwiY3Vyc29yIiwiYWZ0ZXIiLCJjdXJTdHJpbmciLCJjdXJTdHJQb3MiLCJodW1hbml6ZSIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsImNoYXJQYXVzZSIsInN1YnN0ciIsImNoYXJBdCIsInNraXAiLCJ0ZXN0IiwiZXhlYyIsImxlbmd0aCIsInBhcnNlSW50Iiwic3Vic3RyaW5nIiwidGFnIiwib25TdHJpbmdUeXBlZCIsImNhbGxiYWNrIiwicHJlU3RyaW5nVHlwZWQiLCJuZXh0U3RyaW5nIiwiaHRtbCIsInBhdXNlVHlwaW5nIiwiY29uc29sZSIsImxvZyIsImNsZWFySW50ZXJ2YWwiLCJjb250aW51ZVR5cGluZyIsInJlc2V0IiwiaWQiLCJyZW1vdmUiLCJyZXNldENhbGxiYWNrIiwib3B0aW9uIiwiZWFjaCIsIiR0aGlzIiwiZGF0YSIsIndpbmRvdyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBeUJFLFNBQVNBLEdBRVAsWUFFQSxJQUFJQyxHQUFRLFNBQVNDLEVBQUlDLEdBR3JCQyxLQUFLRixHQUFLRixFQUFFRSxHQUdaRSxLQUFL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RUFFWEMsVUFBVyxJQUVYSyxNQUFNLEVBRU5DLFdBQVcsRUFFWGIsWUFBWSxFQUVaaUIsV0FBWSxJQUVabEIsS0FBTSxLQUVOSSxZQUFhLE9BRWIyQyxTQUFVLGFBRVZDLGVBQWdCLGFBRWhCRixjQUFlLGFBRWZhLGNBQWUsZUFJckJLLE9BQU9DIiwiZmlsZSI6InR5cGVkMi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgTUlUIExpY2Vuc2UgKE1JVClcblxuLy8gVHlwZWQuanMgfCBDb3B5cmlnaHQgKGMpIDIwMTQgTWF0dCBCb2xkdCB8IHd3dy5tYXR0Ym9sZHQuY29tXG5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4vLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbi8vIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuLy8gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuLy8gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbi8vIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbi8vIFRIRSBTT0ZUV0FSRS5cblxuXG5cblxuISBmdW5jdGlvbigkKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBUeXBlZCA9IGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7XG5cbiAgICAgICAgLy8gY2hvc2VuIGVsZW1lbnQgdG8gbWFuaXB1bGF0ZSB0ZXh0XG4gICAgICAgIHRoaXMuZWwgPSAkKGVsKTtcblxuICAgICAgICAvLyBvcHRpb25zXG4gICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnR5cGVkLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAvLyBhdHRyaWJ1dGUgdG8gdHlwZSBpbnRvXG4gICAgICAgIHRoaXMuaXNJbnB1dCA9IHRoaXMuZWwuaXMoJ2lucHV0Jyk7XG4gICAgICAgIHRoaXMuYXR0ciA9IHRoaXMub3B0aW9ucy5hdHRyO1xuXG4gICAgICAgIC8vIHNob3cgY3Vyc29yXG4gICAgICAgIHRoaXMuc2hvd0N1cnNvciA9IHRoaXMuaXNJbnB1dCA/IGZhbHNlIDogdGhpcy5vcHRpb25zLnNob3dDdXJzb3I7XG5cbiAgICAgICAgLy8gdGV4dCBjb250ZW50IG9mIGVsZW1lbnRcbiAgICAgICAgdGhpcy5lbENvbnRlbnQgPSB0aGlzLmF0dHIgPyB0aGlzLmVsLmF0dHIodGhpcy5hdHRyKSA6IHRoaXMuZWwudGV4dCgpXG5cbiAgICAgICAgLy8gaHRtbCBvciBwbGFpbiB0ZXh0XG4gICAgICAgIHRoaXMuY29udGVudFR5cGUgPSB0aGlzLm9wdGlvbnMuY29udGVudFR5cGU7XG5cbiAgICAgICAgLy8gdHlwaW5nIHNwZWVkXG4gICAgICAgIHRoaXMudHlwZVNwZWVkID0gdGhpcy5vcHRpb25zLnR5cGVTcGVlZDtcblxuICAgICAgICAvLyBhZGQgYSBkZWxheSBiZWZvcmUgdHlwaW5nIHN0YXJ0c1xuICAgICAgICB0aGlzLnN0YXJ0RGVsYXkgPSB0aGlzLm9wdGlvbnMuc3RhcnREZWxheTtcblxuICAgICAgICAvLyBiYWNrc3BhY2luZyBzcGVlZFxuICAgICAgICB0aGlzLmJhY2tTcGVlZCA9IHRoaXMub3B0aW9ucy5iYWNrU3BlZWQ7XG5cbiAgICAgICAgLy8gYW1vdW50IG9mIHRpbWUgdG8gd2FpdCBiZWZvcmUgYmFja3NwYWNpbmdcbiAgICAgICAgdGhpcy5iYWNrRGVsYXkgPSB0aGlzLm9wdGlvbnMuYmFja0RlbGF5O1xuXG4gICAgICAgIC8vIGlucHV0IHN0cmluZ3Mgb2YgdGV4dFxuICAgICAgICB0aGlzLnN0cmluZ3MgPSB0aGlzLm9wdGlvbnMuc3RyaW5ncztcblxuICAgICAgICAvLyBjaGFyYWN0ZXIgbnVtYmVyIHBvc2l0aW9uIG9mIGN1cnJlbnQgc3RyaW5nXG4gICAgICAgIHRoaXMuc3RyUG9zID0gMDtcblxuICAgICAgICAvLyBjdXJyZW50IGFycmF5IHBvc2l0aW9uXG4gICAgICAgIHRoaXMuYXJyYXlQb3MgPSAwO1xuXG4gICAgICAgIC8vIG51bWJlciB0byBzdG9wIGJhY2tzcGFjaW5nIG9uLlxuICAgICAgICAvLyBkZWZhdWx0IDAsIGNhbiBjaGFuZ2UgZGVwZW5kaW5nIG9uIGhvdyBtYW55IGNoYXJzXG4gICAgICAgIC8vIHlvdSB3YW50IHRvIHJlbW92ZSBhdCB0aGUgdGltZVxuICAgICAgICB0aGlzLnN0b3BOdW0gPSAwO1xuXG4gICAgICAgIC8vIExvb3BpbmcgbG9naWNcbiAgICAgICAgdGhpcy5sb29wID0gdGhpcy5vcHRpb25zLmxvb3A7XG4gICAgICAgIHRoaXMubG9vcENvdW50ID0gdGhpcy5vcHRpb25zLmxvb3BDb3VudDtcbiAgICAgICAgdGhpcy5jdXJMb29wID0gMDtcblxuICAgICAgICAvLyBmb3Igc3RvcHBpbmdcbiAgICAgICAgdGhpcy5zdG9wID0gZmFsc2U7XG5cbiAgICAgICAgLy8gZm9yIHBhdXNpbmcgYW5kIGNvbnRpbnVpbmdcbiAgICAgICAgdGhpcy5iYWNrc3BhY2luZyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIGN1c3RvbSBjdXJzb3JcbiAgICAgICAgdGhpcy5jdXJzb3JDaGFyID0gdGhpcy5vcHRpb25zLmN1cnNvckNoYXI7XG5cbiAgICAgICAgLy8gQWxsIHN5c3RlbXMgZ28hXG4gICAgICAgIHRoaXMuYnVpbGQoKTtcbiAgICB9O1xuXG4gICAgVHlwZWQucHJvdG90eXBlID0ge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yOiBUeXBlZFxuXG4gICAgICAgICxcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBiZWdpbiB0aGUgbG9vcCB3LyBmaXJzdCBjdXJyZW50IHN0cmluZyAoZ2xvYmFsIHNlbGYuc3RyaW5nKVxuICAgICAgICAgICAgLy8gY3VycmVudCBzdHJpbmcgd2lsbCBiZSBwYXNzZWQgYXMgYW4gYXJndW1lbnQgZWFjaCB0aW1lIGFmdGVyIHRoaXNcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIHNlbGYudGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gU3RhcnQgdHlwaW5nXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYmFja3NwYWNpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5iYWNrc3BhY2Uoc2VsZi5zdHJpbmdzW3NlbGYuYXJyYXlQb3NdLCBzZWxmLnN0clBvcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50eXBld3JpdGUoc2VsZi5zdHJpbmdzW3NlbGYuYXJyYXlQb3NdLCBzZWxmLnN0clBvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgc2VsZi5zdGFydERlbGF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgICxcbiAgICAgICAgYnVpbGQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gSW5zZXJ0IGN1cnNvclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0N1cnNvciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gJChcIjxzcGFuIGNsYXNzPVxcXCJ0eXBlZC1jdXJzb3JcXFwiPlwiICsgdGhpcy5jdXJzb3JDaGFyICsgXCI8L3NwYW4+XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWwuYWZ0ZXIodGhpcy5jdXJzb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYXNzIGN1cnJlbnQgc3RyaW5nIHN0YXRlIHRvIGVhY2ggZnVuY3Rpb24sIHR5cGVzIDEgY2hhciBwZXIgY2FsbFxuICAgICAgICAsXG4gICAgICAgIHR5cGV3cml0ZTogZnVuY3Rpb24oY3VyU3RyaW5nLCBjdXJTdHJQb3MpIHtcbiAgICAgICAgICAgIC8vIGV4aXQgd2hlbiBzdG9wcGVkXG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB2YXJ5aW5nIHZhbHVlcyBmb3Igc2V0VGltZW91dCBkdXJpbmcgdHlwaW5nXG4gICAgICAgICAgICAvLyBjYW4ndCBiZSBnbG9iYWwgc2luY2UgbnVtYmVyIGNoYW5nZXMgZWFjaCB0aW1lIGxvb3AgaXMgZXhlY3V0ZWRcbiAgICAgICAgICAgIHZhciBodW1hbml6ZSA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqICgxMDAgLSAzMCkpICsgdGhpcy50eXBlU3BlZWQ7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIE5lZWRlZCBmb3IgcGF1c2luZ1xuICAgICAgICAgICAgc2VsZi5zdHJQb3MgPSBjdXJTdHJQb3M7XG4gICAgICAgICAgICBzZWxmLmJhY2tzcGFjaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0gb3B0aW9uYWwgLS0tLS0tLS0tLS0tLSAvL1xuICAgICAgICAgICAgLy8gYmFja3BhY2VzIGEgY2VydGFpbiBzdHJpbmcgZmFzdGVyXG4gICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy9cbiAgICAgICAgICAgIC8vIGlmIChzZWxmLmFycmF5UG9zID09IDEpe1xuICAgICAgICAgICAgLy8gIHNlbGYuYmFja0RlbGF5ID0gNTA7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvLyBlbHNleyBzZWxmLmJhY2tEZWxheSA9IDUwMDsgfVxuXG4gICAgICAgICAgICAvLyBjb250YWluIHR5cGluZyBmdW5jdGlvbiBpbiBhIHRpbWVvdXQgaHVtYW5pemUnZCBkZWxheVxuICAgICAgICAgICAgc2VsZi50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBmb3IgYW4gZXNjYXBlIGNoYXJhY3RlciBiZWZvcmUgYSBwYXVzZSB2YWx1ZVxuICAgICAgICAgICAgICAgIC8vIGZvcm1hdDogXFxeXFxkKyAuLiBlZzogXjEwMDAgLi4gc2hvdWxkIGJlIGFibGUgdG8gcHJpbnQgdGhlIF4gdG9vIHVzaW5nIF5eXG4gICAgICAgICAgICAgICAgLy8gc2luZ2xlIF4gYXJlIHJlbW92ZWQgZnJvbSBzdHJpbmdcbiAgICAgICAgICAgICAgICB2YXIgY2hhclBhdXNlID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgc3Vic3RyID0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpO1xuICAgICAgICAgICAgICAgIGlmIChzdWJzdHIuY2hhckF0KDApID09PSAnXicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNraXAgPSAxOyAvLyBza2lwIGF0bGVhc3QgMVxuICAgICAgICAgICAgICAgICAgICBpZiAoL15cXF5cXGQrLy50ZXN0KHN1YnN0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnN0ciA9IC9cXGQrLy5leGVjKHN1YnN0cilbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwICs9IHN1YnN0ci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFyUGF1c2UgPSBwYXJzZUludChzdWJzdHIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc3RyaXAgb3V0IHRoZSBlc2NhcGUgY2hhcmFjdGVyIGFuZCBwYXVzZSB2YWx1ZSBzbyB0aGV5J3JlIG5vdCBwcmludGVkXG4gICAgICAgICAgICAgICAgICAgIGN1clN0cmluZyA9IGN1clN0cmluZy5zdWJzdHJpbmcoMCwgY3VyU3RyUG9zKSArIGN1clN0cmluZy5zdWJzdHJpbmcoY3VyU3RyUG9zICsgc2tpcCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBza2lwIG92ZXIgaHRtbCB0YWdzIHdoaWxlIHR5cGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKSA9PT0gJzwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKSAhPT0gJz4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnICs9IGN1clN0cmluZy5zdWJzdHIoY3VyU3RyUG9zKS5jaGFyQXQoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyU3RyUG9zKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJTdHJQb3MrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZyArPSAnPic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0IGZvciBhbnkgcGF1c2UgYWZ0ZXIgYSBjaGFyYWN0ZXJcbiAgICAgICAgICAgICAgICBzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyU3RyUG9zID09PSBjdXJTdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlcyBjYWxsYmFjayBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLm9uU3RyaW5nVHlwZWQoc2VsZi5hcnJheVBvcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIHRoaXMgdGhlIGZpbmFsIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuYXJyYXlQb3MgPT09IHNlbGYuc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5pbWF0aW9uIHRoYXQgb2NjdXJzIG9uIHRoZSBsYXN0IHR5cGVkIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3B0aW9ucy5jYWxsYmFjaygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJMb29wKys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBxdWl0IGlmIHdlIHdvbnQgbG9vcCBiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYubG9vcCA9PT0gZmFsc2UgfHwgc2VsZi5jdXJMb29wID09PSBzZWxmLmxvb3BDb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYmFja3NwYWNlKGN1clN0cmluZywgY3VyU3RyUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHNlbGYuYmFja0RlbGF5KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLyogY2FsbCBiZWZvcmUgZnVuY3Rpb25zIGlmIGFwcGxpY2FibGUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJTdHJQb3MgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLnByZVN0cmluZ1R5cGVkKHNlbGYuYXJyYXlQb3MpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCB0eXBpbmcgZWFjaCBuZXcgY2hhciBpbnRvIGV4aXN0aW5nIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VyU3RyaW5nOiBhcmcsIHNlbGYuZWwuaHRtbDogb3JpZ2luYWwgdGV4dCBpbnNpZGUgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRTdHJpbmcgPSBzZWxmLmVsQ29udGVudCArIGN1clN0cmluZy5zdWJzdHIoMCwgY3VyU3RyUG9zICsgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5hdHRyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbC5hdHRyKHNlbGYuYXR0ciwgbmV4dFN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbnRlbnRUeXBlID09PSAnaHRtbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbC5odG1sKG5leHRTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZWwudGV4dChuZXh0U3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBjaGFyYWN0ZXJzIG9uZSBieSBvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clN0clBvcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aGUgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudHlwZXdyaXRlKGN1clN0cmluZywgY3VyU3RyUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBlbmQgb2YgY2hhcmFjdGVyIHBhdXNlXG4gICAgICAgICAgICAgICAgfSwgY2hhclBhdXNlKTtcblxuICAgICAgICAgICAgICAgIC8vIGh1bWFuaXplZCB2YWx1ZSBmb3IgdHlwaW5nXG4gICAgICAgICAgICB9LCBodW1hbml6ZSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgICxcbiAgICAgICAgYmFja3NwYWNlOiBmdW5jdGlvbihjdXJTdHJpbmcsIGN1clN0clBvcykge1xuICAgICAgICAgICAgLy8gZXhpdCB3aGVuIHN0b3BwZWRcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3AgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHZhcnlpbmcgdmFsdWVzIGZvciBzZXRUaW1lb3V0IGR1cmluZyB0eXBpbmdcbiAgICAgICAgICAgIC8vIGNhbid0IGJlIGdsb2JhbCBzaW5jZSBudW1iZXIgY2hhbmdlcyBlYWNoIHRpbWUgbG9vcCBpcyBleGVjdXRlZFxuICAgICAgICAgICAgdmFyIGh1bWFuaXplID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKDEwMCAtIDMwKSkgKyB0aGlzLmJhY2tTcGVlZDtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgLy8gTmVlZGVkIGZvciBwYXVzaW5nXG4gICAgICAgICAgICBzZWxmLnN0clBvcyA9IGN1clN0clBvcztcbiAgICAgICAgICAgIHNlbGYuYmFja3NwYWNpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBzZWxmLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgLy8gLS0tLS0gdGhpcyBwYXJ0IGlzIG9wdGlvbmFsIC0tLS0tIC8vXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgc3RyaW5nIGFycmF5IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgLy8gb24gdGhlIGZpcnN0IHN0cmluZywgb25seSBkZWxldGUgb25lIHdvcmRcbiAgICAgICAgICAgICAgICAvLyB0aGUgc3RvcE51bSBhY3R1YWxseSByZXByZXNlbnRzIHRoZSBhbW91bnQgb2YgY2hhcnMgdG9cbiAgICAgICAgICAgICAgICAvLyBrZWVwIGluIHRoZSBjdXJyZW50IHN0cmluZy4gSW4gbXkgY2FzZSBpdCdzIDE0LlxuICAgICAgICAgICAgICAgIC8vIGlmIChzZWxmLmFycmF5UG9zID09IDEpe1xuICAgICAgICAgICAgICAgIC8vICBzZWxmLnN0b3BOdW0gPSAxNDtcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgLy9ldmVyeSBvdGhlciB0aW1lLCBkZWxldGUgdGhlIHdob2xlIHR5cGVkIHN0cmluZ1xuICAgICAgICAgICAgICAgIC8vIGVsc2V7XG4gICAgICAgICAgICAgICAgLy8gIHNlbGYuc3RvcE51bSA9IDA7XG4gICAgICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBza2lwIG92ZXIgaHRtbCB0YWdzIHdoaWxlIGJhY2tzcGFjaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcykuY2hhckF0KDApID09PSAnPicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJTdHJpbmcuc3Vic3RyKGN1clN0clBvcykuY2hhckF0KDApICE9PSAnPCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWcgLT0gY3VyU3RyaW5nLnN1YnN0cihjdXJTdHJQb3MpLmNoYXJBdCgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJTdHJQb3MtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clN0clBvcy0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnICs9ICc8JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIC0tLS0tIGNvbnRpbnVlIGltcG9ydGFudCBzdHVmZiAtLS0tLSAvL1xuICAgICAgICAgICAgICAgIC8vIHJlcGxhY2UgdGV4dCB3aXRoIGJhc2UgdGV4dCArIHR5cGVkIGNoYXJhY3RlcnNcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFN0cmluZyA9IHNlbGYuZWxDb250ZW50ICsgY3VyU3RyaW5nLnN1YnN0cigwLCBjdXJTdHJQb3MpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmF0dHIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbC5hdHRyKHNlbGYuYXR0ciwgbmV4dFN0cmluZyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuY29udGVudFR5cGUgPT09ICdodG1sJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbC5odG1sKG5leHRTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbC50ZXh0KG5leHRTdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIG51bWJlciAoaWQgb2YgY2hhcmFjdGVyIGluIGN1cnJlbnQgc3RyaW5nKSBpc1xuICAgICAgICAgICAgICAgIC8vIGxlc3MgdGhhbiB0aGUgc3RvcCBudW1iZXIsIGtlZXAgZ29pbmdcbiAgICAgICAgICAgICAgICBpZiAoY3VyU3RyUG9zID4gc2VsZi5zdG9wTnVtKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN1YnRyYWN0IGNoYXJhY3RlcnMgb25lIGJ5IG9uZVxuICAgICAgICAgICAgICAgICAgICBjdXJTdHJQb3MtLTtcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aGUgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5iYWNrc3BhY2UoY3VyU3RyaW5nLCBjdXJTdHJQb3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgc3RvcCBudW1iZXIgaGFzIGJlZW4gcmVhY2hlZCwgaW5jcmVhc2VcbiAgICAgICAgICAgICAgICAvLyBhcnJheSBwb3NpdGlvbiB0byBuZXh0IHN0cmluZ1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGN1clN0clBvcyA8PSBzZWxmLnN0b3BOdW0pIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hcnJheVBvcysrO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmFycmF5UG9zID09PSBzZWxmLnN0cmluZ3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmJhY2tzcGFjaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFycmF5UG9zID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50eXBld3JpdGUoc2VsZi5zdHJpbmdzW3NlbGYuYXJyYXlQb3NdLCBjdXJTdHJQb3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gaHVtYW5pemVkIHZhbHVlIGZvciB0eXBpbmdcbiAgICAgICAgICAgIH0sIGh1bWFuaXplKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLFxuICAgICAgICBwYXVzZVR5cGluZzogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidHlwaW5nIHBhdXNlZFwiKTtcblxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBzZWxmLnN0b3AgPSB0cnVlO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzZWxmLnRpbWVvdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLFxuICAgICAgICBjb250aW51ZVR5cGluZzogZnVuY3Rpb24oKSB7XG5cblxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLnN0b3ApO1xuXG4gICAgICAgICAgICBpZihzZWxmLnN0b3AgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLnN0b3AgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzZXQgYW5kIHJlYnVpbGQgdGhlIGVsZW1lbnRcbiAgICAgICAgLFxuICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZW91dCk7XG4gICAgICAgICAgICB2YXIgaWQgPSB0aGlzLmVsLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICB0aGlzLmVsLmFmdGVyKCc8c3BhbiBpZD1cIicgKyBpZCArICdcIi8+JylcbiAgICAgICAgICAgIHRoaXMuZWwucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvci5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vIFNlbmQgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICBzZWxmLm9wdGlvbnMucmVzZXRDYWxsYmFjaygpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgJC5mbi50eXBlZCA9IGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBkYXRhID0gJHRoaXMuZGF0YSgndHlwZWQnKSxcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb247XG4gICAgICAgICAgICBpZiAoIWRhdGEpICR0aGlzLmRhdGEoJ3R5cGVkJywgKGRhdGEgPSBuZXcgVHlwZWQodGhpcywgb3B0aW9ucykpKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICQuZm4udHlwZWQuZGVmYXVsdHMgPSB7XG4gICAgICAgIHN0cmluZ3M6IFtcIlRoZXNlIGFyZSB0aGUgZGVmYXVsdCB2YWx1ZXMuLi5cIiwgXCJZb3Uga25vdyB3aGF0IHlvdSBzaG91bGQgZG8/XCIsIFwiVXNlIHlvdXIgb3duIVwiLCBcIkhhdmUgYSBncmVhdCBkYXkhXCJdLFxuICAgICAgICAvLyB0eXBpbmcgc3BlZWRcbiAgICAgICAgdHlwZVNwZWVkOiAwLFxuICAgICAgICAvLyB0aW1lIGJlZm9yZSB0eXBpbmcgc3RhcnRzXG4gICAgICAgIHN0YXJ0RGVsYXk6IDAsXG4gICAgICAgIC8vIGJhY2tzcGFjaW5nIHNwZWVkXG4gICAgICAgIGJhY2tTcGVlZDogMCxcbiAgICAgICAgLy8gdGltZSBiZWZvcmUgYmFja3NwYWNpbmdcbiAgICAgICAgYmFja0RlbGF5OiA1MDAsXG4gICAgICAgIC8vIGxvb3BcbiAgICAgICAgbG9vcDogZmFsc2UsXG4gICAgICAgIC8vIGZhbHNlID0gaW5maW5pdGVcbiAgICAgICAgbG9vcENvdW50OiBmYWxzZSxcbiAgICAgICAgLy8gc2hvdyBjdXJzb3JcbiAgICAgICAgc2hvd0N1cnNvcjogdHJ1ZSxcbiAgICAgICAgLy8gY2hhcmFjdGVyIGZvciBjdXJzb3JcbiAgICAgICAgY3Vyc29yQ2hhcjogXCJ8XCIsXG4gICAgICAgIC8vIGF0dHJpYnV0ZSB0byB0eXBlIChudWxsID09IHRleHQpXG4gICAgICAgIGF0dHI6IG51bGwsXG4gICAgICAgIC8vIGVpdGhlciBodG1sIG9yIHRleHRcbiAgICAgICAgY29udGVudFR5cGU6ICdodG1sJyxcbiAgICAgICAgLy8gY2FsbCB3aGVuIGRvbmUgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgIC8vIHN0YXJ0aW5nIGNhbGxiYWNrIGZ1bmN0aW9uIGJlZm9yZSBlYWNoIHN0cmluZ1xuICAgICAgICBwcmVTdHJpbmdUeXBlZDogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgLy9jYWxsYmFjayBmb3IgZXZlcnkgdHlwZWQgc3RyaW5nXG4gICAgICAgIG9uU3RyaW5nVHlwZWQ6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgIC8vIGNhbGxiYWNrIGZvciByZXNldFxuICAgICAgICByZXNldENhbGxiYWNrOiBmdW5jdGlvbigpIHt9XG4gICAgfTtcblxuXG59KHdpbmRvdy5qUXVlcnkpO1xuIl19
